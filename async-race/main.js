(()=>{"use strict";function e(e,t,n=document.body){const a=document.createElement(e);return a.classList.add(...t),n.append(a),a}function t(e,t){const n=document.createElement(e);return n.classList.add(...t),n}function n(e){return t=this,n=void 0,r=function*(){const t=`_page=${e}`;try{const e=yield fetch("http://127.0.0.1:3000/garage?"+t+"&_limit=7"),n=e.headers.get("X-Total-Count");return{garage:yield e.json(),carsCount:n}}catch(e){console.log(e)}},new((a=void 0)||(a=Promise))((function(e,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof a?n:new a((function(e){e(n)}))).then(o,s)}c((r=r.apply(t,n||[])).next())}));var t,n,a,r}class a{constructor(e,t){this.name=e,this.classes=t,this.button=this.buildButton()}appendTo(e){e.append(this.button)}buildButton(){const e=t("div",this.classes);return e.innerText=this.name,e}}class r{constructor(e){this.garageBoxHeader=t("div",["box__header-container"]),this.selectBtn=new a("Select",["box__header-btn","box__header-btn_select"]),this.removeBtn=new a("Remove",["box__header-btn","box__header-btn_remove"]),this.carName=t("p",["box__tittle"]),this.startBtn=new a("Go",["box__track-btn","box__track-btn_go","active"]),this.stopBtn=new a("Off",["box__track-btn","box__track-btn_off"]),this.name=e.name,this.color=e.color,this.id=e.id,this.trackElements=this.buildTrack(),this.track=this.trackElements.trackContainer,this.car=this.trackElements.car,this.trackLine=this.trackElements.track,this.garageBox=this.buildGarageBox()}buildGarageBox(){const e=t("div",["garage__box","box"]);return e.id=this.id.toString(),e.append(this.garageBoxHeader),this.carName.innerText=this.name,this.garageBoxHeader.append(this.selectBtn.button,this.removeBtn.button,this.carName),e.append(this.track),e}buildTrack(){const e=t("div",["box__track-container"]),n=t("div",["box__track"]),a=t("div",["box__car"]);n.append(a);const r=t("div",["box__track-finish"]);return e.append(this.startBtn.button,this.stopBtn.button,n,r),a.innerHTML=`<svg enable-background="new 0 0 1000 600" overflow="visible" version="1.1" viewBox="0 0 1000 450"><path d="m251.99 369.53c-3.653 0-6.615 2.962-6.615 6.615s2.962 6.615 6.615 6.615 6.615-2.962 6.615-6.615-2.961-6.615-6.615-6.615zm0 18.772c-1.548 0-2.804 1.256-2.804 2.805 0 1.548 1.255 2.804 2.804 2.804s2.804-1.256 2.804-2.804c0-1.549-1.255-2.805-2.804-2.805zm7.431 8.607v22.711c6.642-1.127 12.776-3.74 18.053-7.483l-16.059-16.059c-0.648 0.307-1.312 0.587-1.994 0.831zm12.505-11.337l16.058 16.058c3.744-5.276 6.354-11.413 7.482-18.055h-22.713c-0.245 0.682-0.52 1.349-0.827 1.997zm-2e-3 -18.852c0.307 0.648 0.585 1.313 0.83 1.995h22.712c-1.127-6.642-3.74-12.776-7.483-18.054l-16.059 16.059zm-29.358-10.507c0.649-0.308 1.313-0.587 1.995-0.831v-22.711c-6.642 1.127-12.776 3.74-18.053 7.483l16.058 16.059zm9.424-52.279c-39.881 0-72.212 32.33-72.212 72.212s32.331 72.212 72.212 72.212c39.882 0 72.212-32.33 72.212-72.212s-32.33-72.212-72.212-72.212zm0 123.79c-28.487 0-51.58-23.093-51.58-51.58 0-28.486 23.093-51.58 51.58-51.58s51.58 23.094 51.58 51.58c0 28.487-23.093 51.58-51.58 51.58zm0-63.739c1.549 0 2.804-1.256 2.804-2.805 0-1.548-1.255-2.804-2.804-2.804-1.548 0-2.804 1.256-2.804 2.804 1e-3 1.549 1.256 2.805 2.804 2.805zm25.484-23.834c-5.276-3.743-11.412-6.355-18.053-7.482v22.711c0.682 0.244 1.347 0.522 1.995 0.83l16.058-16.059zm-45.418 26.566l-16.058-16.059c-3.744 5.277-6.355 11.413-7.482 18.055h22.713c0.244-0.682 0.519-1.348 0.827-1.996zm-5.55 45.419c5.277 3.743 11.413 6.355 18.055 7.482v-22.711c-0.682-0.244-1.348-0.522-1.996-0.83l-16.059 16.059zm4.721-28.563h-22.711c1.127 6.642 3.739 12.777 7.482 18.055l16.059-16.06c-0.307-0.648-0.586-1.313-0.83-1.995zm8.606-7.431c0-1.549-1.255-2.804-2.804-2.804s-2.804 1.255-2.804 2.804 1.255 2.804 2.804 2.804c1.548 0 2.804-1.255 2.804-2.804zm24.315 0c0 1.549 1.255 2.804 2.804 2.804s2.804-1.255 2.804-2.804-1.255-2.804-2.804-2.804c-1.549 1e-3 -2.804 1.256-2.804 2.804zm547.49-6.614c-3.653 0-6.615 2.962-6.615 6.615s2.962 6.615 6.615 6.615 6.615-2.962 6.615-6.615-2.962-6.615-6.615-6.615zm-9.424-13.317c0.648-0.308 1.313-0.587 1.994-0.831v-22.711c-6.642 1.127-12.776 3.74-18.054 7.483l16.06 16.059zm9.424 32.089c-1.549 0-2.804 1.256-2.804 2.805 0 1.548 1.255 2.804 2.804 2.804s2.804-1.256 2.804-2.804c-1e-3 -1.549-1.256-2.805-2.804-2.805zm7.43 8.607v22.711c6.642-1.127 12.775-3.74 18.053-7.483l-16.059-16.059c-0.648 0.307-1.312 0.587-1.994 0.831zm13.331-13.334c-0.244 0.682-0.52 1.349-0.826 1.997l16.058 16.058c3.744-5.276 6.354-11.413 7.482-18.055h-22.714zm104.87-91.42c-9.801-15.004-34.896-20.235-54.012-26.477-133.49-32.242-177.88-21.747-200.16-24.888-4.495-1.199-8.503-5.123-12.179-7.413-8.057-5.019-16.418-9.434-24.358-14.298-13.119-8.036-73.653-41.146-90.02-47.128-35.963-13.142-92.818-23.68-229.82-12.708-5.56-1.528-8.916-6.016-14.826-7.414-5.846-1.383-11.214 1.693-15.356 2.648 0.075 4.491-0.326 8.136-1.059 11.649-26.775 11.291-53.869 19.953-80.488 31.242-11.108 4.711-22.569 9.32-33.89 14.297-7.042 3.097-13.77 7.495-21.71 10.062-8.624 2.786-18.051 1.527-27.536 3.706-17.267 3.967-35.99 4.497-55.071 4.766-2.181 3.738-5.977 7.503-6.884 12.18 3.305 1.02 4.412 3.298 4.236 7.942-5.84 8.653-4.274 20.981-4.236 34.949-12.441 6.37-14.333 29.711-11.12 48.187l-1.059 4.767c0.665 5.223 2.365 10.742 2.647 16.415 4.672 3.133 9.968 8.167 13.238 12.709 1.595 2.215 2.371 6.033 5.295 6.884 15.631 11.41 94.785 13.768 94.785 13.768l4.164 0.228c-0.637-3.934-0.973-7.969-0.973-12.082 0-41.478 33.625-75.102 75.102-75.102 41.478 0 75.102 33.624 75.102 75.102 0 6.966-0.952 18.277-2.728 24.678l416.07-0.736c-2.527-7.52-3.898-15.57-3.898-23.941 0-41.478 33.624-75.102 75.102-75.102s75.102 33.624 75.102 75.102c0 7.27-1.036 14.297-2.964 20.945l4.252-0.089s32.779-1.584 40.773-5.296c7.994-3.711 11.12-14.297 11.12-14.297l-2.118-22.24c1e-3 -1e-3 9.847-47.13-0.529-63.015zm-664.56-54.536c-24.887-16.535-11.702-35.842-12.373-35.781-0.398 0.354-0.685 0.636-0.865 0.827 0.528-0.559 0.788-0.82 0.865-0.827 6.412-5.714 43.006-31.271 172.82-31.474 4.06 22.768 8.12 52.68 12.179 75.446-52.233-1.583-155.04-0.7-172.63-8.191zm334.66 8.467c-11.408 0-124.97-0.031-124.97-0.031s-18.331-48.33-24.887-75.157c0.763 0.07 23.298 1.055 23.298 1.055s44.613 5.079 72.546 14.298c21.976 7.253 65.363 36.403 66.19 38.126-13.053 0.668-16.143 10.95-12.178 21.709zm204.26 57.848c-39.882 0-72.212 32.33-72.212 72.212s32.33 72.212 72.212 72.212 72.212-32.33 72.212-72.212-32.331-72.212-72.212-72.212zm0 123.79c-28.486 0-51.58-23.093-51.58-51.58 0-28.486 23.094-51.58 51.58-51.58 28.487 0 51.58 23.094 51.58 51.58 0 28.487-23.093 51.58-51.58 51.58zm-19.935-61.007l-16.059-16.059c-3.743 5.277-6.354 11.413-7.481 18.055h22.713c0.244-0.682 0.519-1.348 0.827-1.996zm7.777 9.425c0-1.549-1.256-2.804-2.805-2.804-1.548 0-2.804 1.255-2.804 2.804s1.256 2.804 2.804 2.804c1.55 0 2.805-1.255 2.805-2.804zm12.158-12.157c1.549 0 2.804-1.256 2.804-2.805 0-1.548-1.255-2.804-2.804-2.804s-2.804 1.256-2.804 2.804c0 1.549 1.255 2.805 2.804 2.805zm25.484-23.834c-5.277-3.743-11.412-6.355-18.054-7.482v22.711c0.682 0.244 1.347 0.522 1.995 0.83l16.059-16.059zm-13.327 35.991c0 1.549 1.256 2.804 2.805 2.804 1.548 0 2.804-1.255 2.804-2.804s-1.256-2.804-2.804-2.804c-1.549 1e-3 -2.805 1.256-2.805 2.804zm-37.642 35.994c5.277 3.743 11.413 6.355 18.055 7.482v-22.711c-0.683-0.244-1.348-0.522-1.996-0.83l-16.059 16.059zm4.721-28.563h-22.711c1.127 6.642 3.739 12.777 7.482 18.055l16.059-16.06c-0.308-0.648-0.586-1.313-0.83-1.995zm41.527-14.86h22.711c-1.127-6.642-3.739-12.776-7.482-18.054l-16.059 16.059c0.307 0.648 0.586 1.313 0.83 1.995z" fill="${this.color}"/></svg>`,{trackContainer:e,car:a,track:n}}}function i(e){return t=this,n=void 0,r=function*(){try{const t=yield fetch("http://127.0.0.1:3000/garage",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return yield t.json()}catch(e){console.log(e)}},new((a=void 0)||(a=Promise))((function(e,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof a?n:new a((function(e){e(n)}))).then(o,s)}c((r=r.apply(t,n||[])).next())}));var t,n,a,r}function o(e,t){return e.classList.contains("garage__change-btn_next")?t++:t--,t}const s=[{brand:"Seat",models:["Alhambra","Altea","Altea XL","Arosa","Cordoba","Cordoba Vario","Exeo","Ibiza","Ibiza ST","Exeo ST","Leon","Leon ST","Inca","Mii","Toledo"]},{brand:"Renault",models:["Captur","Clio","Clio Grandtour","Espace","Express","Fluence","Grand Espace","Grand Modus","Grand Scenic","Kadjar","Kangoo","Kangoo Express","Koleos","Laguna","Laguna Grandtour","Latitude","Mascott","Mégane","Mégane CC","Mégane Combi","Mégane Grandtour","Mégane Coupé","Mégane Scénic","Scénic","Talisman","Talisman Grandtour","Thalia","Twingo","Wind","Zoé"]},{brand:"Peugeot",models:["1007","107","106","108","2008","205","205 Cabrio","206","206 CC","206 SW","207","207 CC","207 SW","306","307","307 CC","307 SW","308","308 CC","308 SW","309","4007","4008","405","406","407","407 SW","5008","508","508 SW","605","806","607","807","Bipper","RCZ"]},{brand:"Dacia",models:["Dokker","Duster","Lodgy","Logan","Logan MCV","Logan Van","Sandero","Solenza"]},{brand:"Citroën",models:["Berlingo","C-Crosser","C-Elissée","C-Zero","C1","C2","C3","C3 Picasso","C4","C4 Aircross","C4 Cactus","C4 Coupé","C4 Grand Picasso","C4 Sedan","C5","C5 Break","C5 Tourer","C6","C8","DS3","DS4","DS5","Evasion","Jumper","Jumpy","Saxo","Nemo","Xantia","Xsara"]},{brand:"Opel",models:["Agila","Ampera","Antara","Astra","Astra cabrio","Astra caravan","Astra coupé","Calibra","Campo","Cascada","Corsa","Frontera","Insignia","Insignia kombi","Kadett","Meriva","Mokka","Movano","Omega","Signum","Vectra","Vectra Caravan","Vivaro","Vivaro Kombi","Zafira"]},{brand:"Alfa Romeo",models:["145","146","147","155","156","156 Sportwagon","159","159 Sportwagon","164","166","4C","Brera","GTV","MiTo","Crosswagon","Spider","GT","Giulietta","Giulia"]},{brand:"Škoda",models:["Favorit","Felicia","Citigo","Fabia","Fabia Combi","Fabia Sedan","Felicia Combi","Octavia","Octavia Combi","Roomster","Yeti","Rapid","Rapid Spaceback","Superb","Superb Combi"]},{brand:"Chevrolet",models:["Alero","Aveo","Camaro","Captiva","Corvette","Cruze","Cruze SW","Epica","Equinox","Evanda","HHR","Kalos","Lacetti","Lacetti SW","Lumina","Malibu","Matiz","Monte Carlo","Nubira","Orlando","Spark","Suburban","Tacuma","Tahoe","Trax"]},{brand:"Porsche",models:["911 Carrera","911 Carrera Cabrio","911 Targa","911 Turbo","924","944","997","Boxster","Cayenne","Cayman","Macan","Panamera"]},{brand:"Honda",models:["Accord","Accord Coupé","Accord Tourer","City","Civic","Civic Aerodeck","Civic Coupé","Civic Tourer","Civic Type R","CR-V","CR-X","CR-Z","FR-V","HR-V","Insight","Integra","Jazz","Legend","Prelude"]},{brand:"Subaru",models:["BRZ","Forester","Impreza","Impreza Wagon","Justy","Legacy","Legacy Wagon","Legacy Outback","Levorg","Outback","SVX","Tribeca","Tribeca B9","XV"]},{brand:"Mazda",models:["121","2","3","323","323 Combi","323 Coupé","323 F","5","6","6 Combi","626","626 Combi","B-Fighter","B2500","BT","CX-3","CX-5","CX-7","CX-9","Demio","MPV","MX-3","MX-5","MX-6","Premacy","RX-7","RX-8","Xedox 6"]},{brand:"Mitsubishi",models:["3000 GT","ASX","Carisma","Colt","Colt CC","Eclipse","Fuso canter","Galant","Galant Combi","Grandis","L200","L200 Pick up","L200 Pick up Allrad","L300","Lancer","Lancer Combi","Lancer Evo","Lancer Sportback","Outlander","Pajero","Pajeto Pinin","Pajero Pinin Wagon","Pajero Sport","Pajero Wagon","Space Star"]},{brand:"Lexus",models:["CT","GS","GS 300","GX","IS","IS 200","IS 250 C","IS-F","LS","LX","NX","RC F","RX","RX 300","RX 400h","RX 450h","SC 430"]},{brand:"Toyota",models:["4-Runner","Auris","Avensis","Avensis Combi","Avensis Van Verso","Aygo","Camry","Carina","Celica","Corolla","Corolla Combi","Corolla sedan","Corolla Verso","FJ Cruiser","GT86","Hiace","Hiace Van","Highlander","Hilux","Land Cruiser","MR2","Paseo","Picnic","Prius","RAV4","Sequoia","Starlet","Supra","Tundra","Urban Cruiser","Verso","Yaris","Yaris Verso"]},{brand:"BMW",models:["i3","i8","M3","M4","M5","M6","Rad 1","Rad 1 Cabrio","Rad 1 Coupé","Rad 2","Rad 2 Active Tourer","Rad 2 Coupé","Rad 2 Gran Tourer","Rad 3","Rad 3 Cabrio","Rad 3 Compact","Rad 3 Coupé","Rad 3 GT","Rad 3 Touring","Rad 4","Rad 4 Cabrio","Rad 4 Gran Coupé","Rad 5","Rad 5 GT","Rad 5 Touring","Rad 6","Rad 6 Cabrio","Rad 6 Coupé","Rad 6 Gran Coupé","Rad 7","Rad 8 Coupé","X1","X3","X4","X5","X6","Z3","Z3 Coupé","Z3 Roadster","Z4","Z4 Roadster"]},{brand:"Volkswagen",models:["Amarok","Beetle","Bora","Bora Variant","Caddy","Caddy Van","Life","California","Caravelle","CC","Crafter","Crafter Van","Crafter Kombi","CrossTouran","Eos","Fox","Golf","Golf Cabrio","Golf Plus","Golf Sportvan","Golf Variant","Jetta","LT","Lupo","Multivan","New Beetle","New Beetle Cabrio","Passat","Passat Alltrack","Passat CC","Passat Variant","Passat Variant Van","Phaeton","Polo","Polo Van","Polo Variant","Scirocco","Sharan","T4","T4 Caravelle","T4 Multivan","T5","T5 Caravelle","T5 Multivan","T5 Transporter Shuttle","Tiguan","Touareg","Touran"]},{brand:"Suzuki",models:["Alto","Baleno","Baleno kombi","Grand Vitara","Grand Vitara XL-7","Ignis","Jimny","Kizashi","Liana","Samurai","Splash","Swift","SX4","SX4 Sedan","Vitara","Wagon R+"]},{brand:"Mercedes-Benz",models:["100 D","115","124","126","190","190 D","190 E","200 - 300","200 D","200 E","210 Van","210 kombi","310 Van","310 kombi","230 - 300 CE Coupé","260 - 560 SE","260 - 560 SEL","500 - 600 SEC Coupé","Trieda A","A","A L","AMG GT","Trieda B","Trieda C","C","C Sportcoupé","C T","Citan","CL","CL","CLA","CLC","CLK Cabrio","CLK Coupé","CLS","Trieda E","E","E Cabrio","E Coupé","E T","Trieda G","G Cabrio","GL","GLA","GLC","GLE","GLK","Trieda M","MB 100","Trieda R","Trieda S","S","S Coupé","SL","SLC","SLK","SLR","Sprinter"]},{brand:"Saab",models:["9-3","9-3 Cabriolet","9-3 Coupé","9-3 SportCombi","9-5","9-5 SportCombi","900","900 C","900 C Turbo","9000"]},{brand:"Audi",models:["100","100 Avant","80","80 Avant","80 Cabrio","90","A1","A2","A3","A3 Cabriolet","A3 Limuzina","A3 Sportback","A4","A4 Allroad","A4 Avant","A4 Cabriolet","A5","A5 Cabriolet","A5 Sportback","A6","A6 Allroad","A6 Avant","A7","A8","A8 Long","Q3","Q5","Q7","R8","RS4 Cabriolet","RS4/RS4 Avant","RS5","RS6 Avant","RS7","S3/S3 Sportback","S4 Cabriolet","S4/S4 Avant","S5/S5 Cabriolet","S6/RS6","S7","S8","SQ5","TT Coupé","TT Roadster","TTS"]},{brand:"Kia",models:["Avella","Besta","Carens","Carnival","Cee`d","Cee`d SW","Cerato","K 2500","Magentis","Opirus","Optima","Picanto","Pregio","Pride","Pro Cee`d","Rio","Rio Combi","Rio sedan","Sephia","Shuma","Sorento","Soul","Sportage","Venga"]},{brand:"Land Rover",models:["109","Defender","Discovery","Discovery Sport","Freelander","Range Rover","Range Rover Evoque","Range Rover Sport"]},{brand:"Dodge",models:["Avenger","Caliber","Challenger","Charger","Grand Caravan","Journey","Magnum","Nitro","RAM","Stealth","Viper"]},{brand:"Chrysler",models:["300 C","300 C Touring","300 M","Crossfire","Grand Voyager","LHS","Neon","Pacifica","Plymouth","PT Cruiser","Sebring","Sebring Convertible","Stratus","Stratus Cabrio","Town & Country","Voyager"]},{brand:"Ford",models:["Aerostar","B-Max","C-Max","Cortina","Cougar","Edge","Escort","Escort Cabrio","Escort kombi","Explorer","F-150","F-250","Fiesta","Focus","Focus C-Max","Focus CC","Focus kombi","Fusion","Galaxy","Grand C-Max","Ka","Kuga","Maverick","Mondeo","Mondeo Combi","Mustang","Orion","Puma","Ranger","S-Max","Sierra","Street Ka","Tourneo Connect","Tourneo Custom","Transit","Transit","Transit Bus","Transit Connect LWB","Transit Courier","Transit Custom","Transit kombi","Transit Tourneo","Transit Valnik","Transit Van","Transit Van 350","Windstar"]},{brand:"Hummer",models:["H2","H3"]},{brand:"Hyundai",models:["Accent","Atos","Atos Prime","Coupé","Elantra","Galloper","Genesis","Getz","Grandeur","H 350","H1","H1 Bus","H1 Van","H200","i10","i20","i30","i30 CW","i40","i40 CW","ix20","ix35","ix55","Lantra","Matrix","Santa Fe","Sonata","Terracan","Trajet","Tucson","Veloster"]},{brand:"Infiniti",models:["EX","FX","G","G Coupé","M","Q","QX"]},{brand:"Jaguar",models:["Daimler","F-Pace","F-Type","S-Type","Sovereign","X-Type","X-type Estate","XE","XF","XJ","XJ12","XJ6","XJ8","XJ8","XJR","XK","XK8 Convertible","XKR","XKR Convertible"]},{brand:"Jeep",models:["Cherokee","Commander","Compass","Grand Cherokee","Patriot","Renegade","Wrangler"]},{brand:"Nissan",models:["100 NX","200 SX","350 Z","350 Z Roadster","370 Z","Almera","Almera Tino","Cabstar E - T","Cabstar TL2 Valnik","e-NV200","GT-R","Insterstar","Juke","King Cab","Leaf","Maxima","Maxima QX","Micra","Murano","Navara","Note","NP300 Pickup","NV200","NV400","Pathfinder","Patrol","Patrol GR","Pickup","Pixo","Primastar","Primastar Combi","Primera","Primera Combi","Pulsar","Qashqai","Serena","Sunny","Terrano","Tiida","Trade","Vanette Cargo","X-Trail"]},{brand:"Volvo",models:["240","340","360","460","850","850 kombi","C30","C70","C70 Cabrio","C70 Coupé","S40","S60","S70","S80","S90","V40","V50","V60","V70","V90","XC60","XC70","XC90"]},{brand:"Daewoo",models:["Espero","Kalos","Lacetti","Lanos","Leganza","Lublin","Matiz","Nexia","Nubira","Nubira kombi","Racer","Tacuma","Tico"]},{brand:"Fiat",models:["1100","126","500","500L","500X","850","Barchetta","Brava","Cinquecento","Coupé","Croma","Doblo","Doblo Cargo","Doblo Cargo Combi","Ducato","Ducato Van","Ducato Kombi","Ducato Podvozok","Florino","Florino Combi","Freemont","Grande Punto","Idea","Linea","Marea","Marea Weekend","Multipla","Palio Weekend","Panda","Panda Van","Punto","Punto Cabriolet","Punto Evo","Punto Van","Qubo","Scudo","Scudo Van","Scudo Kombi","Sedici","Seicento","Stilo","Stilo Multiwagon","Strada","Talento","Tipo","Ulysse","Uno","X1/9"]},{brand:"MINI",models:["Cooper","Cooper Cabrio","Cooper Clubman","Cooper D","Cooper D Clubman","Cooper S","Cooper S Cabrio","Cooper S Clubman","Countryman","Mini One","One D"]},{brand:"Rover",models:["200","214","218","25","400","414","416","620","75"]},{brand:"Smart",models:["Cabrio","City-Coupé","Compact Pulse","Forfour","Fortwo cabrio","Fortwo coupé","Roadster"]}];function c(e){return Math.floor(Math.random()*e)}function l(e,t){return n=this,a=void 0,i=function*(){const n=`id=${e}`,a=`status=${t}`;try{const e=yield fetch("http://127.0.0.1:3000/engine?"+n+"&"+a,{method:"PATCH"});return yield e.json()}catch(e){console.log(e)}},new((r=void 0)||(r=Promise))((function(e,t){function o(e){try{c(i.next(e))}catch(e){t(e)}}function s(e){try{c(i.throw(e))}catch(e){t(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(o,s)}c((i=i.apply(n,a||[])).next())}));var n,a,r,i}var u=function(e,t,n,a){return new(n||(n=Promise))((function(r,i){function o(e){try{c(a.next(e))}catch(e){i(e)}}function s(e){try{c(a.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}c((a=a.apply(e,t||[])).next())}))};class d{static startAnimate(e){return u(this,void 0,void 0,(function*(){if(e.startBtn.button.classList.contains("active")){e.startBtn.button.classList.remove("active"),e.stopBtn.button.classList.add("active");const t=yield l(e.id,"started"),n=e.car,a=e.trackElements.track;try{return yield this.animate(n,a,t,e.id,e),Promise.resolve({garageBox:e,response:t})}catch(e){return Promise.reject()}}}))}static animate(e,t,n,a,r){return u(this,void 0,void 0,(function*(){let i;r.stopBtn.button.addEventListener("click",(()=>u(this,void 0,void 0,(function*(){yield this.resetAnimation(r)}))),{once:!0});let o=!1;const s=+window.getComputedStyle(t).width.slice(0,-2),c=+window.getComputedStyle(e).width.slice(0,-2),l=s-c-10;requestAnimationFrame((function t(a){void 0===i&&(i=a);const c=a-i;if(c){const t=s/(n.distance/n.velocity)*c;e.style.transform=`translateX(${t}px)`,t>l&&(o=!0)}!o&&r.stopBtn.button.classList.contains("active")&&requestAnimationFrame(t)}));try{return yield function(e,t){return n=this,a=void 0,i=function*(){const t=`id=${e}`;try{const e=yield fetch("http://127.0.0.1:3000/engine?"+t+"&status=drive",{method:"PATCH"});return 500===e.status?yield Promise.reject():200===e.status?yield Promise.resolve():yield Promise.reject()}catch(e){return Promise.reject()}},new((r=void 0)||(r=Promise))((function(e,t){function o(e){try{c(i.next(e))}catch(e){t(e)}}function s(e){try{c(i.throw(e))}catch(e){t(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(o,s)}c((i=i.apply(n,a||[])).next())}));var n,a,r,i}(a),Promise.resolve()}catch(e){return o=!0,Promise.reject()}}))}static resetAnimation(e){return u(this,void 0,void 0,(function*(){0===(yield l(e.id,"stopped")).velocity&&(e.startBtn.button.classList.add("active"),e.stopBtn.button.classList.remove("active"),e.car.style.transform="translateX(0)")}))}}const h=new class{constructor(){this.massageContainer=this.creatMassageContainer(),this.massage=this.massageText()}creatMassageContainer(){const e=t("div",["massage-container","off"]);return e.addEventListener("click",(()=>{e.classList.add("off")})),e}massageText(){const e=t("p",["massage-container__text"]);return this.massageContainer.append(e),e}};var m=function(e,t,n,a){return new(n||(n=Promise))((function(r,i){function o(e){try{c(a.next(e))}catch(e){i(e)}}function s(e){try{c(a.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}c((a=a.apply(e,t||[])).next())}))};class g{static startRace(e){return m(this,void 0,void 0,(function*(){try{const t=yield Promise.any(e.map((e=>d.startAnimate(e))));t&&(yield this.addWinner(t),h.massageContainer.classList.remove("off"),h.massage.innerText=`Race winner ${t.garageBox.name} time ${Number((t.response.distance/t.response.velocity/1e3).toFixed(3))} seconds`)}catch(e){console.log("All cars crashed!")}}))}static resetRace(e){e.forEach((e=>{d.resetAnimation(e)}))}static addWinner(e){return m(this,void 0,void 0,(function*(){const t={id:e.garageBox.id,wins:1,time:Number((e.response.distance/e.response.velocity/1e3).toFixed(3))};500===(yield function(e){return t=this,n=void 0,r=function*(){try{return yield fetch("http://127.0.0.1:3000/winners",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}catch(e){return console.log(e),yield Promise.reject()}},new((a=void 0)||(a=Promise))((function(e,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof a?n:new a((function(e){e(n)}))).then(o,s)}c((r=r.apply(t,n||[])).next())}));var t,n,a,r}(t)).status&&this.updateWinner(e,t)}))}static updateWinner(e,t){return m(this,void 0,void 0,(function*(){const n=yield function(e){return t=this,n=void 0,r=function*(){try{const t=yield fetch("http://127.0.0.1:3000/winners/"+e,{method:"GET"});return yield t.json()}catch(e){console.log(e)}},new((a=void 0)||(a=Promise))((function(e,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof a?n:new a((function(e){e(n)}))).then(o,s)}c((r=r.apply(t,n||[])).next())}));var t,n,a,r}(e.garageBox.id);if(n){const a={wins:n.wins+1,time:n.time<t.time?n.time:t.time};yield function(e,t){return n=this,a=void 0,i=function*(){try{const n=yield fetch("http://127.0.0.1:3000/winners/"+t,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return yield n.json()}catch(e){console.log(e)}},new((r=void 0)||(r=Promise))((function(e,t){function o(e){try{c(i.next(e))}catch(e){t(e)}}function s(e){try{c(i.throw(e))}catch(e){t(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(o,s)}c((i=i.apply(n,a||[])).next())}));var n,a,r,i}(a,e.garageBox.id)}}))}}var C=function(e,t,n,a){return new(n||(n=Promise))((function(r,i){function o(e){try{c(a.next(e))}catch(e){i(e)}}function s(e){try{c(a.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}c((a=a.apply(e,t||[])).next())}))};const b=new class{constructor(){this.garageMenu=t("div",["garage-menu"]),this.forms=this.createForm(),this.buttons=this.createBtnsInMenu()}buildMenu(){return this.garageMenu.append(...this.forms,this.buttons),this.garageMenu}createForm(){const e=new Array;return["Create","Update"].forEach((n=>{const a=t("form",["create-car-form"]);this.createInputForCreateCar(a,n,"Enter car name"),e.push(a)})),e}createInputForCreateCar(e,n,r){["text","color"].forEach((a=>{const i=t("input",[`create-car-form__input-${a}`]);e.append(i),i.type=a,i.name="name","color"===a&&(i.value="#65E6D1",i.name="color"),"text"===a&&(i.placeholder=r),"Update"===n&&(i.disabled=!0)}));const i=new a(n,["create-car-form__submit-btn"]);e.append(i.button),"Create"===n&&this.addSubmitCreateCar(e,i.button)}addSubmitCreateCar(e,t){return C(this,void 0,void 0,(function*(){t.addEventListener("click",(t=>C(this,void 0,void 0,(function*(){t.preventDefault();const n=e.children[0],a=e.children[1],r={name:n.value||"New Car",color:a.value};n.value="",a.value="#65E6D1",function(e,t){t.garage.addCarInGarage(e),t.carsCount++,t.garageTittle.innerText=`Garage (${t.carsCount})`,t.pageNumberText.innerText=`Page ${t.pageNumber} of ${Math.ceil(Number(t.carsCount)/7)}`,t.changePageBtns.forEach(((e,n)=>{1===n&&t.carsCount>7*t.pageNumber&&e.classList.contains("off")&&(e.classList.remove("off"),e.addEventListener("click",(()=>{t.pageNumber=o(e,t.pageNumber),t.changePageBtns.forEach((e=>{var t;null===(t=e.parentElement)||void 0===t||t.remove()})),t.buildAutodrom()})))}))}(yield i(r),f)}))))}))}createBtnsInMenu(){const e=[["menu__btn","menu__btn-race"],["menu__btn","menu__btn-reset"],["menu__btn","menu__btn-generate-cars"]],a=t("div",["menu__btn-container"]);return this.garageMenu.append(a),["Race","Reset","Generate Cars"].forEach(((r,o)=>{const l=t("div",e[o]);a.append(l),l.innerText=r,l.addEventListener("click",(()=>C(this,void 0,void 0,(function*(){if("Generate Cars"===r)if(function(){const e=new Array;for(let t=0;t<100;t++){const t={name:"",color:""},n=s[c(s.length)],a=n.brand,r=n.models[c(n.models.length)];t.name+=`${a} ${r}`;let i="#"+Math.floor(16777215*Math.random()).toString(16);t.color=i,e.push(t)}return e}().map((e=>i(e))),f.changePageBtns[1].classList.contains("off"))f.buildAutodrom();else{const e=yield n(f.pageNumber);(null==e?void 0:e.carsCount)&&(f.carsCount=+e.carsCount,f.garageTittle.innerText=`Garage (${f.carsCount})`,f.pageNumberText.innerText=`Page ${f.pageNumber} of ${Math.ceil(f.carsCount/7)}`)}"Race"===r&&g.startRace(f.garage.garageBoxes),"Reset"===r&&g.resetRace(f.garage.garageBoxes)}))))})),a}};var v=function(e,t,n,a){return new(n||(n=Promise))((function(r,i){function o(e){try{c(a.next(e))}catch(e){i(e)}}function s(e){try{c(a.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}c((a=a.apply(e,t||[])).next())}))};class p{constructor(e){this.garageItems=new Array,this.removeBtns=new Array,this.selectBtns=new Array,this.garageBoxes=new Array,this.garage=this.createGarage(),this.garageContainer=e}createNewPageGarage(e,t){this.garageItems=[],this.removeBtns=[],this.selectBtns=[],this.garageBoxes=[],e.forEach((e=>{this.addCar(e,t)}))}addCarInGarage(e){this.garageItems.length<7&&this.addCar(e)}deleteCar(e,t){return v(this,void 0,void 0,(function*(){yield function(e){return t=this,n=void 0,r=function*(){try{yield fetch("http://127.0.0.1:3000/garage/"+e,{method:"DELETE"})}catch(e){console.log(e)}},new((a=void 0)||(a=Promise))((function(e,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof a?n:new a((function(e){e(n)}))).then(o,s)}c((r=r.apply(t,n||[])).next())}));var t,n,a,r}(e.id),yield n(t),function(e){var t,n,a,r;t=this,n=void 0,r=function*(){try{yield fetch("http://127.0.0.1:3000/winners/"+e,{method:"DELETE"})}catch(e){console.log(e)}},new((a=void 0)||(a=Promise))((function(e,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof a?n:new a((function(e){e(n)}))).then(o,s)}c((r=r.apply(t,n||[])).next())}))}(e.id),this.garageContainer.pageNumber=t,this.garageContainer.buildAutodrom()}))}updateCarMethod(e){return v(this,void 0,void 0,(function*(){null===event||void 0===event||event.preventDefault();const t=b.forms[1].children[0],n=b.forms[1].children[1],a={name:t.value||e.name,color:n.value||e.color};t.value="",n.value="#65E6D1";const r=yield function(e,t){return n=this,a=void 0,i=function*(){try{const n=yield fetch("http://127.0.0.1:3000/garage/"+t,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return yield n.json()}catch(e){console.log(e)}},new((r=void 0)||(r=Promise))((function(e,t){function o(e){try{c(i.next(e))}catch(e){t(e)}}function s(e){try{c(i.throw(e))}catch(e){t(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(o,s)}c((i=i.apply(n,a||[])).next())}));var n,a,r,i}(a,e.id);e.name=r.name,e.carName.innerText=e.name,e.color=r.color,e.car.innerHTML=`<svg enable-background="new 0 0 1000 600" overflow="visible" version="1.1" viewBox="0 0 1000 450"><path d="m251.99 369.53c-3.653 0-6.615 2.962-6.615 6.615s2.962 6.615 6.615 6.615 6.615-2.962 6.615-6.615-2.961-6.615-6.615-6.615zm0 18.772c-1.548 0-2.804 1.256-2.804 2.805 0 1.548 1.255 2.804 2.804 2.804s2.804-1.256 2.804-2.804c0-1.549-1.255-2.805-2.804-2.805zm7.431 8.607v22.711c6.642-1.127 12.776-3.74 18.053-7.483l-16.059-16.059c-0.648 0.307-1.312 0.587-1.994 0.831zm12.505-11.337l16.058 16.058c3.744-5.276 6.354-11.413 7.482-18.055h-22.713c-0.245 0.682-0.52 1.349-0.827 1.997zm-2e-3 -18.852c0.307 0.648 0.585 1.313 0.83 1.995h22.712c-1.127-6.642-3.74-12.776-7.483-18.054l-16.059 16.059zm-29.358-10.507c0.649-0.308 1.313-0.587 1.995-0.831v-22.711c-6.642 1.127-12.776 3.74-18.053 7.483l16.058 16.059zm9.424-52.279c-39.881 0-72.212 32.33-72.212 72.212s32.331 72.212 72.212 72.212c39.882 0 72.212-32.33 72.212-72.212s-32.33-72.212-72.212-72.212zm0 123.79c-28.487 0-51.58-23.093-51.58-51.58 0-28.486 23.093-51.58 51.58-51.58s51.58 23.094 51.58 51.58c0 28.487-23.093 51.58-51.58 51.58zm0-63.739c1.549 0 2.804-1.256 2.804-2.805 0-1.548-1.255-2.804-2.804-2.804-1.548 0-2.804 1.256-2.804 2.804 1e-3 1.549 1.256 2.805 2.804 2.805zm25.484-23.834c-5.276-3.743-11.412-6.355-18.053-7.482v22.711c0.682 0.244 1.347 0.522 1.995 0.83l16.058-16.059zm-45.418 26.566l-16.058-16.059c-3.744 5.277-6.355 11.413-7.482 18.055h22.713c0.244-0.682 0.519-1.348 0.827-1.996zm-5.55 45.419c5.277 3.743 11.413 6.355 18.055 7.482v-22.711c-0.682-0.244-1.348-0.522-1.996-0.83l-16.059 16.059zm4.721-28.563h-22.711c1.127 6.642 3.739 12.777 7.482 18.055l16.059-16.06c-0.307-0.648-0.586-1.313-0.83-1.995zm8.606-7.431c0-1.549-1.255-2.804-2.804-2.804s-2.804 1.255-2.804 2.804 1.255 2.804 2.804 2.804c1.548 0 2.804-1.255 2.804-2.804zm24.315 0c0 1.549 1.255 2.804 2.804 2.804s2.804-1.255 2.804-2.804-1.255-2.804-2.804-2.804c-1.549 1e-3 -2.804 1.256-2.804 2.804zm547.49-6.614c-3.653 0-6.615 2.962-6.615 6.615s2.962 6.615 6.615 6.615 6.615-2.962 6.615-6.615-2.962-6.615-6.615-6.615zm-9.424-13.317c0.648-0.308 1.313-0.587 1.994-0.831v-22.711c-6.642 1.127-12.776 3.74-18.054 7.483l16.06 16.059zm9.424 32.089c-1.549 0-2.804 1.256-2.804 2.805 0 1.548 1.255 2.804 2.804 2.804s2.804-1.256 2.804-2.804c-1e-3 -1.549-1.256-2.805-2.804-2.805zm7.43 8.607v22.711c6.642-1.127 12.775-3.74 18.053-7.483l-16.059-16.059c-0.648 0.307-1.312 0.587-1.994 0.831zm13.331-13.334c-0.244 0.682-0.52 1.349-0.826 1.997l16.058 16.058c3.744-5.276 6.354-11.413 7.482-18.055h-22.714zm104.87-91.42c-9.801-15.004-34.896-20.235-54.012-26.477-133.49-32.242-177.88-21.747-200.16-24.888-4.495-1.199-8.503-5.123-12.179-7.413-8.057-5.019-16.418-9.434-24.358-14.298-13.119-8.036-73.653-41.146-90.02-47.128-35.963-13.142-92.818-23.68-229.82-12.708-5.56-1.528-8.916-6.016-14.826-7.414-5.846-1.383-11.214 1.693-15.356 2.648 0.075 4.491-0.326 8.136-1.059 11.649-26.775 11.291-53.869 19.953-80.488 31.242-11.108 4.711-22.569 9.32-33.89 14.297-7.042 3.097-13.77 7.495-21.71 10.062-8.624 2.786-18.051 1.527-27.536 3.706-17.267 3.967-35.99 4.497-55.071 4.766-2.181 3.738-5.977 7.503-6.884 12.18 3.305 1.02 4.412 3.298 4.236 7.942-5.84 8.653-4.274 20.981-4.236 34.949-12.441 6.37-14.333 29.711-11.12 48.187l-1.059 4.767c0.665 5.223 2.365 10.742 2.647 16.415 4.672 3.133 9.968 8.167 13.238 12.709 1.595 2.215 2.371 6.033 5.295 6.884 15.631 11.41 94.785 13.768 94.785 13.768l4.164 0.228c-0.637-3.934-0.973-7.969-0.973-12.082 0-41.478 33.625-75.102 75.102-75.102 41.478 0 75.102 33.624 75.102 75.102 0 6.966-0.952 18.277-2.728 24.678l416.07-0.736c-2.527-7.52-3.898-15.57-3.898-23.941 0-41.478 33.624-75.102 75.102-75.102s75.102 33.624 75.102 75.102c0 7.27-1.036 14.297-2.964 20.945l4.252-0.089s32.779-1.584 40.773-5.296c7.994-3.711 11.12-14.297 11.12-14.297l-2.118-22.24c1e-3 -1e-3 9.847-47.13-0.529-63.015zm-664.56-54.536c-24.887-16.535-11.702-35.842-12.373-35.781-0.398 0.354-0.685 0.636-0.865 0.827 0.528-0.559 0.788-0.82 0.865-0.827 6.412-5.714 43.006-31.271 172.82-31.474 4.06 22.768 8.12 52.68 12.179 75.446-52.233-1.583-155.04-0.7-172.63-8.191zm334.66 8.467c-11.408 0-124.97-0.031-124.97-0.031s-18.331-48.33-24.887-75.157c0.763 0.07 23.298 1.055 23.298 1.055s44.613 5.079 72.546 14.298c21.976 7.253 65.363 36.403 66.19 38.126-13.053 0.668-16.143 10.95-12.178 21.709zm204.26 57.848c-39.882 0-72.212 32.33-72.212 72.212s32.33 72.212 72.212 72.212 72.212-32.33 72.212-72.212-32.331-72.212-72.212-72.212zm0 123.79c-28.486 0-51.58-23.093-51.58-51.58 0-28.486 23.094-51.58 51.58-51.58 28.487 0 51.58 23.094 51.58 51.58 0 28.487-23.093 51.58-51.58 51.58zm-19.935-61.007l-16.059-16.059c-3.743 5.277-6.354 11.413-7.481 18.055h22.713c0.244-0.682 0.519-1.348 0.827-1.996zm7.777 9.425c0-1.549-1.256-2.804-2.805-2.804-1.548 0-2.804 1.255-2.804 2.804s1.256 2.804 2.804 2.804c1.55 0 2.805-1.255 2.805-2.804zm12.158-12.157c1.549 0 2.804-1.256 2.804-2.805 0-1.548-1.255-2.804-2.804-2.804s-2.804 1.256-2.804 2.804c0 1.549 1.255 2.805 2.804 2.805zm25.484-23.834c-5.277-3.743-11.412-6.355-18.054-7.482v22.711c0.682 0.244 1.347 0.522 1.995 0.83l16.059-16.059zm-13.327 35.991c0 1.549 1.256 2.804 2.805 2.804 1.548 0 2.804-1.255 2.804-2.804s-1.256-2.804-2.804-2.804c-1.549 1e-3 -2.805 1.256-2.805 2.804zm-37.642 35.994c5.277 3.743 11.413 6.355 18.055 7.482v-22.711c-0.683-0.244-1.348-0.522-1.996-0.83l-16.059 16.059zm4.721-28.563h-22.711c1.127 6.642 3.739 12.777 7.482 18.055l16.059-16.06c-0.308-0.648-0.586-1.313-0.83-1.995zm41.527-14.86h22.711c-1.127-6.642-3.739-12.776-7.482-18.054l-16.059 16.059c0.307 0.648 0.586 1.313 0.83 1.995z" fill="${e.color}"/></svg>`,b.forms[1].children[0].disabled=!0,b.forms[1].children[1].disabled=!0}))}updateCar(e){return v(this,void 0,void 0,(function*(){b.forms[1].children[0].disabled=!1,b.forms[1].children[1].disabled=!1,b.forms[1].children[2].addEventListener("click",this.updateCarMethod.bind(this,e),{once:!0})}))}addCar(e,t=1){const n=new r(e);n.removeBtn.button.addEventListener("click",(()=>v(this,void 0,void 0,(function*(){yield this.deleteCar(n.garageBox,t)})))),n.selectBtn.button.addEventListener("click",(()=>v(this,void 0,void 0,(function*(){yield this.updateCar(n)})))),n.startBtn.button.addEventListener("click",(()=>v(this,void 0,void 0,(function*(){try{yield d.startAnimate(n)}catch(e){console.log(n.name,"crashed!")}})))),this.removeBtns.push(n.removeBtn.button),this.selectBtns.push(n.selectBtn.button),this.garageItems.push(n.garageBox),this.garage.append(n.garageBox),this.garageBoxes.push(n)}createGarage(){return t("div",["garage"])}}const f=new class{constructor(){this.garageContainer=t("div",["garage__container"]),this.changePageBtnContainer=t("div",["garage__change-page-btn-container"]),this.garage=new p(this),this.garageTittle=this.createAutodromTittle(),this.pageNumberText=this.createPageNumberText(),this.pageNumber=1,this.carsCount=0,this.changePageBtns=new Array}buildAutodrom(){return e=this,t=void 0,r=function*(){this.garage.garage.innerHTML="";const e=yield n(this.pageNumber);e&&(this.garageTittle.innerText=`Garage (${e.carsCount})`,this.carsCount=Number(e.carsCount),this.pageNumberText.innerText=`Page ${this.pageNumber} of ${Math.ceil(Number(e.carsCount)/7)}`,yield this.garage.createNewPageGarage(e.garage,this.pageNumber),this.garageContainer.append(this.garage.garage),this.createChangePageBtn(e),this.garageContainer.append(this.changePageBtnContainer))},new((a=void 0)||(a=Promise))((function(n,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,s)}c((r=r.apply(e,t||[])).next())}));var e,t,a,r}createAutodromTittle(){const e=t("h2",["garage__tittle"]);return e.innerText="Garage (0)",this.garageContainer.append(e),e}createPageNumberText(){const e=t("p",["garage__page-text"]);return e.innerText="Page ",this.garageContainer.append(e),e}createChangePageBtn(e){this.changePageBtns=[],this.changePageBtnContainer.innerHTML="",["Prev","Next"].forEach((n=>{const a=t("div",["garage__change-btn",`garage__change-btn_${n.toLocaleLowerCase()}`]);this.changePageBtnContainer.append(a),a.innerText=n,1===this.pageNumber&&"Prev"===n||Number(e.carsCount)/7<=this.pageNumber&&"Next"===n?a.classList.add("off"):a.addEventListener("click",(()=>{this.pageNumber=o(a,this.pageNumber),this.changePageBtnContainer.remove(),this.buildAutodrom()})),this.changePageBtns.push(a)}))}};class y{constructor(e){this.garageContainer=f,this.menu=b,this.main=e}buildGarage(){return e=this,t=void 0,a=function*(){this.main.classList.contains("main_garage")||this.main.classList.contains("main_winners")?this.main.classList.contains("main_garage")||(this.main.innerHTML="",this.main.classList.toggle("main_garage"),this.main.classList.toggle("main_winners"),this.main.append(this.menu.buildMenu()),yield this.garageContainer.buildAutodrom(),this.main.append(this.garageContainer.garageContainer)):(this.main.classList.add("main_garage"),this.main.append(this.menu.buildMenu()),yield this.garageContainer.buildAutodrom(),this.main.append(this.garageContainer.garageContainer))},new((n=void 0)||(n=Promise))((function(r,i){function o(e){try{c(a.next(e))}catch(e){i(e)}}function s(e){try{c(a.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}c((a=a.apply(e,t||[])).next())}));var e,t,n,a}}class T{constructor(){this.tableHeader=this.crateTableHeader()}crateTableHeader(){const e=t("tr",["table__head"]);return["Number","Car","Name","Wins","Best time (seconds)"].forEach((n=>{const a=t("th",["table__head-ceil",`table__head-ceil_${n.toLocaleLowerCase().split(" ").join("-")}`]);a.innerText=n,e.append(a)})),e}appendTo(e){return e.append(this.tableHeader),this.tableHeader}}class S{constructor(){this.table=t("table",["winners__table"])}buildTable(e){this.table.innerHTML="";const n=new T;n.appendTo(this.table),this.tableHeader=n.tableHeader,e&&e.winners.forEach((e=>{return n=this,a=void 0,i=function*(){const n=t("tr",["table-row"]),a=t("td",["table-ceil","table-ceil_number"]),r=t("td",["table-ceil","table-ceil_color"]),i=t("td",["table-ceil","table-ceil_name"]),o=t("td",["table-ceil","table-ceil_wins"]),s=t("td",["table-ceil","table-ceil_time"]);n.append(a,r,i,o,s);const c=yield function(e){return t=this,n=void 0,r=function*(){try{const t=yield fetch("http://127.0.0.1:3000/garage/"+e,{method:"GET"});return yield t.json()}catch(e){console.log(e)}},new((a=void 0)||(a=Promise))((function(e,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof a?n:new a((function(e){e(n)}))).then(o,s)}c((r=r.apply(t,n||[])).next())}));var t,n,a,r}(e.id);a.innerText=`${e.id}`,o.innerText=`${e.wins}`,s.innerText=`${e.time}`,c&&(r.innerHTML=`<svg enable-background="new 0 0 1000 600" overflow="visible" version="1.1" viewBox="0 0 1000 450"><path d="m251.99 369.53c-3.653 0-6.615 2.962-6.615 6.615s2.962 6.615 6.615 6.615 6.615-2.962 6.615-6.615-2.961-6.615-6.615-6.615zm0 18.772c-1.548 0-2.804 1.256-2.804 2.805 0 1.548 1.255 2.804 2.804 2.804s2.804-1.256 2.804-2.804c0-1.549-1.255-2.805-2.804-2.805zm7.431 8.607v22.711c6.642-1.127 12.776-3.74 18.053-7.483l-16.059-16.059c-0.648 0.307-1.312 0.587-1.994 0.831zm12.505-11.337l16.058 16.058c3.744-5.276 6.354-11.413 7.482-18.055h-22.713c-0.245 0.682-0.52 1.349-0.827 1.997zm-2e-3 -18.852c0.307 0.648 0.585 1.313 0.83 1.995h22.712c-1.127-6.642-3.74-12.776-7.483-18.054l-16.059 16.059zm-29.358-10.507c0.649-0.308 1.313-0.587 1.995-0.831v-22.711c-6.642 1.127-12.776 3.74-18.053 7.483l16.058 16.059zm9.424-52.279c-39.881 0-72.212 32.33-72.212 72.212s32.331 72.212 72.212 72.212c39.882 0 72.212-32.33 72.212-72.212s-32.33-72.212-72.212-72.212zm0 123.79c-28.487 0-51.58-23.093-51.58-51.58 0-28.486 23.093-51.58 51.58-51.58s51.58 23.094 51.58 51.58c0 28.487-23.093 51.58-51.58 51.58zm0-63.739c1.549 0 2.804-1.256 2.804-2.805 0-1.548-1.255-2.804-2.804-2.804-1.548 0-2.804 1.256-2.804 2.804 1e-3 1.549 1.256 2.805 2.804 2.805zm25.484-23.834c-5.276-3.743-11.412-6.355-18.053-7.482v22.711c0.682 0.244 1.347 0.522 1.995 0.83l16.058-16.059zm-45.418 26.566l-16.058-16.059c-3.744 5.277-6.355 11.413-7.482 18.055h22.713c0.244-0.682 0.519-1.348 0.827-1.996zm-5.55 45.419c5.277 3.743 11.413 6.355 18.055 7.482v-22.711c-0.682-0.244-1.348-0.522-1.996-0.83l-16.059 16.059zm4.721-28.563h-22.711c1.127 6.642 3.739 12.777 7.482 18.055l16.059-16.06c-0.307-0.648-0.586-1.313-0.83-1.995zm8.606-7.431c0-1.549-1.255-2.804-2.804-2.804s-2.804 1.255-2.804 2.804 1.255 2.804 2.804 2.804c1.548 0 2.804-1.255 2.804-2.804zm24.315 0c0 1.549 1.255 2.804 2.804 2.804s2.804-1.255 2.804-2.804-1.255-2.804-2.804-2.804c-1.549 1e-3 -2.804 1.256-2.804 2.804zm547.49-6.614c-3.653 0-6.615 2.962-6.615 6.615s2.962 6.615 6.615 6.615 6.615-2.962 6.615-6.615-2.962-6.615-6.615-6.615zm-9.424-13.317c0.648-0.308 1.313-0.587 1.994-0.831v-22.711c-6.642 1.127-12.776 3.74-18.054 7.483l16.06 16.059zm9.424 32.089c-1.549 0-2.804 1.256-2.804 2.805 0 1.548 1.255 2.804 2.804 2.804s2.804-1.256 2.804-2.804c-1e-3 -1.549-1.256-2.805-2.804-2.805zm7.43 8.607v22.711c6.642-1.127 12.775-3.74 18.053-7.483l-16.059-16.059c-0.648 0.307-1.312 0.587-1.994 0.831zm13.331-13.334c-0.244 0.682-0.52 1.349-0.826 1.997l16.058 16.058c3.744-5.276 6.354-11.413 7.482-18.055h-22.714zm104.87-91.42c-9.801-15.004-34.896-20.235-54.012-26.477-133.49-32.242-177.88-21.747-200.16-24.888-4.495-1.199-8.503-5.123-12.179-7.413-8.057-5.019-16.418-9.434-24.358-14.298-13.119-8.036-73.653-41.146-90.02-47.128-35.963-13.142-92.818-23.68-229.82-12.708-5.56-1.528-8.916-6.016-14.826-7.414-5.846-1.383-11.214 1.693-15.356 2.648 0.075 4.491-0.326 8.136-1.059 11.649-26.775 11.291-53.869 19.953-80.488 31.242-11.108 4.711-22.569 9.32-33.89 14.297-7.042 3.097-13.77 7.495-21.71 10.062-8.624 2.786-18.051 1.527-27.536 3.706-17.267 3.967-35.99 4.497-55.071 4.766-2.181 3.738-5.977 7.503-6.884 12.18 3.305 1.02 4.412 3.298 4.236 7.942-5.84 8.653-4.274 20.981-4.236 34.949-12.441 6.37-14.333 29.711-11.12 48.187l-1.059 4.767c0.665 5.223 2.365 10.742 2.647 16.415 4.672 3.133 9.968 8.167 13.238 12.709 1.595 2.215 2.371 6.033 5.295 6.884 15.631 11.41 94.785 13.768 94.785 13.768l4.164 0.228c-0.637-3.934-0.973-7.969-0.973-12.082 0-41.478 33.625-75.102 75.102-75.102 41.478 0 75.102 33.624 75.102 75.102 0 6.966-0.952 18.277-2.728 24.678l416.07-0.736c-2.527-7.52-3.898-15.57-3.898-23.941 0-41.478 33.624-75.102 75.102-75.102s75.102 33.624 75.102 75.102c0 7.27-1.036 14.297-2.964 20.945l4.252-0.089s32.779-1.584 40.773-5.296c7.994-3.711 11.12-14.297 11.12-14.297l-2.118-22.24c1e-3 -1e-3 9.847-47.13-0.529-63.015zm-664.56-54.536c-24.887-16.535-11.702-35.842-12.373-35.781-0.398 0.354-0.685 0.636-0.865 0.827 0.528-0.559 0.788-0.82 0.865-0.827 6.412-5.714 43.006-31.271 172.82-31.474 4.06 22.768 8.12 52.68 12.179 75.446-52.233-1.583-155.04-0.7-172.63-8.191zm334.66 8.467c-11.408 0-124.97-0.031-124.97-0.031s-18.331-48.33-24.887-75.157c0.763 0.07 23.298 1.055 23.298 1.055s44.613 5.079 72.546 14.298c21.976 7.253 65.363 36.403 66.19 38.126-13.053 0.668-16.143 10.95-12.178 21.709zm204.26 57.848c-39.882 0-72.212 32.33-72.212 72.212s32.33 72.212 72.212 72.212 72.212-32.33 72.212-72.212-32.331-72.212-72.212-72.212zm0 123.79c-28.486 0-51.58-23.093-51.58-51.58 0-28.486 23.094-51.58 51.58-51.58 28.487 0 51.58 23.094 51.58 51.58 0 28.487-23.093 51.58-51.58 51.58zm-19.935-61.007l-16.059-16.059c-3.743 5.277-6.354 11.413-7.481 18.055h22.713c0.244-0.682 0.519-1.348 0.827-1.996zm7.777 9.425c0-1.549-1.256-2.804-2.805-2.804-1.548 0-2.804 1.255-2.804 2.804s1.256 2.804 2.804 2.804c1.55 0 2.805-1.255 2.805-2.804zm12.158-12.157c1.549 0 2.804-1.256 2.804-2.805 0-1.548-1.255-2.804-2.804-2.804s-2.804 1.256-2.804 2.804c0 1.549 1.255 2.805 2.804 2.805zm25.484-23.834c-5.277-3.743-11.412-6.355-18.054-7.482v22.711c0.682 0.244 1.347 0.522 1.995 0.83l16.059-16.059zm-13.327 35.991c0 1.549 1.256 2.804 2.805 2.804 1.548 0 2.804-1.255 2.804-2.804s-1.256-2.804-2.804-2.804c-1.549 1e-3 -2.805 1.256-2.805 2.804zm-37.642 35.994c5.277 3.743 11.413 6.355 18.055 7.482v-22.711c-0.683-0.244-1.348-0.522-1.996-0.83l-16.059 16.059zm4.721-28.563h-22.711c1.127 6.642 3.739 12.777 7.482 18.055l16.059-16.06c-0.308-0.648-0.586-1.313-0.83-1.995zm41.527-14.86h22.711c-1.127-6.642-3.739-12.776-7.482-18.054l-16.059 16.059c0.307 0.648 0.586 1.313 0.83 1.995z" fill="${c.color}"/></svg>`,i.innerText=c.name),this.table.append(n)},new((r=void 0)||(r=Promise))((function(e,t){function o(e){try{c(i.next(e))}catch(e){t(e)}}function s(e){try{c(i.throw(e))}catch(e){t(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(o,s)}c((i=i.apply(n,a||[])).next())}));var n,a,r,i}))}}var w=function(e,t,n,a){return new(n||(n=Promise))((function(r,i){function o(e){try{c(a.next(e))}catch(e){i(e)}}function s(e){try{c(a.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}c((a=a.apply(e,t||[])).next())}))};class x{constructor(e){this.title=this.createWinnersTitle(),this.pageNumberText=this.createPageNumberText(),this.pageNumber=1,this.winnersBtnContainer=t("div",["winners__btn-container"]),this.table=new S,this.sortParams={sort:"time",order:"DESC"},this.main=e}buildWinners(){return w(this,void 0,void 0,(function*(){this.main.classList.contains("main_winners")||(this.main.innerHTML="",this.main.classList.toggle("main_winners"),this.main.classList.toggle("main_garage")),this.main.append(this.title,this.pageNumberText);const e=yield function(e,t){return n=this,a=void 0,i=function*(){const n=`_page=${e}`,a=`_sort=${t.sort}`,r=`_order=${t.order}`;try{const e=yield fetch("http://127.0.0.1:3000/winners?"+n+"&_limit=10&"+a+"&"+r),t=e.headers.get("X-Total-Count");return{winners:yield e.json(),winnersCount:t}}catch(e){console.log(e)}},new((r=void 0)||(r=Promise))((function(e,t){function o(e){try{c(i.next(e))}catch(e){t(e)}}function s(e){try{c(i.throw(e))}catch(e){t(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(o,s)}c((i=i.apply(n,a||[])).next())}));var n,a,r,i}(this.pageNumber,this.sortParams);this.createWinnersBtnContainer(),this.main.append(this.table.table,this.winnersBtnContainer),e&&(this.title.innerText=`Winners (${e.winnersCount})`,this.pageNumberText.innerText=`Page ${this.pageNumber} of ${Math.ceil(Number(e.winnersCount)/10)}`,this.table.buildTable(e),this.pageSwitching(e),this.sortTable())}))}createWinnersTitle(){return t("h1",["winners__title"])}createPageNumberText(){return t("p",["winners__page-number"])}createWinnersBtnContainer(){this.winnersBtnContainer.innerHTML="",this.prevBtn=null,this.nextBtn=null;const e=new a("Prev",["winners__btn","winners__prev-btn","off"]),t=new a("Next",["winners__btn","winners__next-btn","off"]);this.prevBtn=e.button,this.nextBtn=t.button,this.winnersBtnContainer.append(e.button,t.button)}pageSwitching(e){var t,n,a,r;return w(this,void 0,void 0,(function*(){1!==this.pageNumber&&(null===(t=this.prevBtn)||void 0===t||t.classList.remove("off"),null===(n=this.prevBtn)||void 0===n||n.addEventListener("click",(()=>w(this,void 0,void 0,(function*(){this.pageNumber--,this.buildWinners()}))))),e.winnersCount&&+e.winnersCount/10>this.pageNumber&&(null===(a=this.nextBtn)||void 0===a||a.classList.remove("off"),null===(r=this.nextBtn)||void 0===r||r.addEventListener("click",(()=>w(this,void 0,void 0,(function*(){this.pageNumber++,this.buildWinners()})))))}))}sortTable(){var e;null===(e=this.table.tableHeader)||void 0===e||e.addEventListener("click",(e=>{this.pageNumber=1;const t=e.target;"Wins"===t.innerText&&this.updateSortParams("wins"),"Best time (seconds)"===t.innerText&&this.updateSortParams("time"),this.buildWinners()}),{once:!0})}updateSortParams(e){"wins"===e&&("time"===this.sortParams.sort?(this.sortParams.sort="wins",this.sortParams.order="ASC"):this.changeASConDESC()),"time"===e&&("wins"===this.sortParams.sort?(this.sortParams.sort="time",this.sortParams.order="DESC"):this.changeASConDESC())}changeASConDESC(){"DESC"===this.sortParams.order?this.sortParams.order="ASC":this.sortParams.order="DESC"}}class P{constructor(){this.buttonsGarageAndWinners=new Array,this.layout=e("div",["root"]),this.header=this.createHeader(),this.buttonsInHeader=this.createButtonToHeader(this.header),this.tittleApp=this.createTittleApp(this.header),this.main=this.createMain(this.layout),this.garageView=new y(this.main),this.winnersView=new x(this.main)}createHeader(){return this.layout.append(h.massageContainer),e("div",["header"],this.layout)}createButtonToHeader(t){const n=[["header-button","header-button_to-garage","on"],["header-button","header-button_to-winners"]];["To Garage","To Winners"].forEach(((a,r)=>{const i=e("div",n[r],t);this.buttonsGarageAndWinners.push(i),i.innerText=a,i.addEventListener("click",(()=>{i.classList.contains("on")||(this.buttonsGarageAndWinners.forEach((e=>{e.classList.remove("on")})),i.classList.add("on"),i.classList.contains("header-button_to-garage")?this.garageView.buildGarage():this.winnersView.buildWinners())}))}))}createTittleApp(t){const n=e("h1",["tittle-app"],t);return n.innerText="Async Race",n}createMain(t){const n=e("div",["main"],t);return new y(n).buildGarage(),n}}new class{constructor(){this.layout=new P}}})();